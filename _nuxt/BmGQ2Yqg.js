import{_ as p}from"./BcrJk5wk.js";import{g as f,l as m,n as u,j as x,x as h,A as v,c as r,p as _,a as n,b,t as k,w as g,o as a,d as y}from"./BldJ7gzI.js";const N={class:"flex justify-center items-center min-h-screen"},w={key:0,class:"text-center"},A={key:1,class:"text-center"},V=f({__name:"callback",setup(R){const c=h(),i=v(),l=m(),o=u(!0),t=u(null);return x(async()=>{const s=c.query.data;if(!s||typeof s!="string"){t.value="No authentication data provided",o.value=!1;return}try{const e=JSON.parse(decodeURIComponent(s));console.log("Auth result:",e),e.token?(l.setToken(e.token),e.user&&l.setUser(e.user),i.push("/profile")):(t.value="No token received from server",o.value=!1)}catch(e){console.error("Auth callback error:",e),t.value="An error occurred during authentication",o.value=!1}}),(s,e)=>{const d=p;return a(),r("div",N,[o.value?(a(),r("div",w,e[0]||(e[0]=[n("h2",{class:"text-2xl font-bold mb-4"},"Processing login...",-1),n("p",null,"Please wait while we complete your authentication.",-1)]))):t.value?(a(),r("div",A,[e[2]||(e[2]=n("h2",{class:"text-2xl font-bold mb-4 text-red-600"},"Authentication Error",-1)),n("p",null,k(t.value),1),b(d,{to:"/",class:"inline-block mt-4 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},{default:g(()=>e[1]||(e[1]=[y(" Return to Home ")])),_:1})])):_("",!0)])}}});export{V as default};
