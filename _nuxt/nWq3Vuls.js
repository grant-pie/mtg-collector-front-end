import{_ as m}from"./B-fdaqDP.js";import{g as f,l as p,n as c,j as h,x as _,A as k,c as l,p as v,a as n,b as x,t as b,w as g,o as u,d as y}from"./3Q0dXlXk.js";const N={class:"flex justify-center items-center min-h-screen"},A={key:0,class:"text-center"},R={key:1,class:"text-center"},S=f({__name:"callback",setup(w){const i=_(),d=k(),o=p(),s=c(!0),t=c(null);return h(async()=>{const r=i.query.data;if(!r||typeof r!="string"){t.value="No authentication data provided",s.value=!1;return}try{const e=JSON.parse(decodeURIComponent(r));if(console.log("Auth result:",e),e.access_token||e.token){const a=e.access_token||e.token;o.setToken(a),e.rememberMe!==void 0&&o.setRememberMe(e.rememberMe),e.refresh_token&&o.setRefreshToken(e.refresh_token),e.user&&o.setUser(e.user),d.push("/profile")}else console.error("Auth response structure:",e),t.value="No token received from server",s.value=!1}catch(e){console.error("Auth callback error:",e),t.value="An error occurred during authentication",s.value=!1}}),(r,e)=>{const a=m;return u(),l("div",N,[s.value?(u(),l("div",A,e[0]||(e[0]=[n("h2",{class:"text-2xl font-bold mb-4"},"Processing login...",-1),n("p",null,"Please wait while we complete your authentication.",-1)]))):t.value?(u(),l("div",R,[e[2]||(e[2]=n("h2",{class:"text-2xl font-bold mb-4 text-red-600"},"Authentication Error",-1)),n("p",null,b(t.value),1),x(a,{to:"/",class:"inline-block mt-4 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},{default:g(()=>e[1]||(e[1]=[y(" Return to Home ")])),_:1})])):v("",!0)])}}});export{S as default};
