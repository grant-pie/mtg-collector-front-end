import{e as S,s as A,r as C,p as x,g as N,c as a,a as t,u as c,t as o,h as u,n as m,F as y,i as v,o as r,z as R}from"./BLjF41zC.js";import{u as G}from"./ChjthFXB.js";import{u as j}from"./B8Gnj2nm.js";const z={class:"container mx-auto py-8 px-4"},D={key:0,class:"flex justify-center my-8"},B={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4"},E={key:2,class:"text-center my-8"},F={key:3,class:"mb-6"},L={class:"flex flex-wrap gap-2 mb-6"},P=["onClick"],V={class:"space-y-6"},I={class:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 text-white"},M={class:"flex justify-between items-center"},W={class:"text-2xl font-bold"},$={key:0,class:"text-blue-100 mt-1"},H={class:"text-blue-100 text-sm mt-1"},U={class:"text-right"},q={class:"text-blue-100 text-sm mt-2"},J={class:"p-6"},K={key:0,class:"text-center my-8"},O={key:1,class:"space-y-4"},Q={class:"flex items-center space-x-4"},X={class:"flex items-center"},Y={key:0,class:"text-xl"},Z={key:1,class:"text-xl"},tt={key:2,class:"text-xl"},et={class:"flex items-center"},st=["src","alt"],nt={class:"font-semibold text-gray-900"},ot={key:0,class:"text-sm text-gray-600"},at={class:"flex items-center space-x-6"},rt={class:"text-center"},lt={class:"flex items-center space-x-2"},it={class:"bg-green-600 hover:bg-green-700 text-white py-1 px-2 rounded text-sm"},dt={class:"bg-red-600 hover:bg-red-700 text-white py-1 px-2 rounded text-sm"},ct={class:"text-xs text-gray-500 mt-1"},ut={class:"text-center min-w-[100px]"},mt={class:"flex items-center justify-center mb-1"},xt={class:"w-16 bg-gray-200 rounded-full h-2 mr-2"},gt={class:"text-sm font-semibold text-gray-900"},yt={key:0,class:"bg-white shadow-md rounded-lg p-6 border border-gray-200 mt-6"},vt={class:"grid gap-6 md:grid-cols-2 lg:grid-cols-4"},bt={class:"text-center"},_t={class:"text-3xl font-bold text-blue-600 mb-2"},ht={class:"text-center"},pt={class:"text-3xl font-bold text-green-600 mb-2"},ft={class:"text-center"},kt={class:"text-3xl font-bold text-purple-600 mb-2"},wt={class:"text-center"},Tt={class:"text-3xl font-bold text-orange-600 mb-2"},Rt=S({__name:"rankings",setup(St){const g=G(),{allStandings:i,loading:_,error:b}=A(g),d=C(null),h=x(()=>d.value===null?i.value:i.value.filter(l=>l.tournament.id===d.value)),p=x(()=>i.value.filter(l=>l.tournament.isActive).length),f=x(()=>{const l=new Set;return i.value.forEach(e=>{e.standings.forEach(n=>{l.add(n.user.id)})}),l.size}),k=x(()=>i.value.reduce((l,e)=>l+e.standings.reduce((n,s)=>n+s.totalGames,0),0)),w=l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),T=async()=>{await g.fetchAllStandings()};return N(async()=>{await g.fetchAllStandings()}),j({title:"Tournament Rankings",meta:[{name:"description",content:"View tournament standings and player rankings for MTG tournaments."}]}),(l,e)=>(r(),a("div",z,[e[11]||(e[11]=t("h1",{class:"text-3xl font-bold mb-6"},"Tournament Rankings",-1)),c(_)?(r(),a("div",D,e[1]||(e[1]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"},null,-1)]))):c(b)?(r(),a("div",B,[t("p",null,o(c(b)),1),t("button",{onClick:T,class:"mt-2 bg-red-600 hover:bg-red-700 text-white py-1 px-3 rounded"}," Try Again ")])):c(i).length===0?(r(),a("div",E,e[2]||(e[2]=[t("div",{class:"text-gray-400 text-6xl mb-4"},"🏆",-1),t("p",{class:"text-gray-600 text-lg"},"No tournaments found.",-1),t("p",{class:"text-gray-500 mt-2"},"Check back later for tournament rankings!",-1)]))):(r(),a("div",F,[t("div",L,[t("button",{onClick:e[0]||(e[0]=n=>d.value=null),class:m(["py-1 px-3 rounded transition-colors",d.value===null?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-700"])}," All Tournaments ",2),(r(!0),a(y,null,v(c(i),n=>(r(),a("button",{key:n.tournament.id,onClick:s=>d.value=n.tournament.id,class:m(["py-1 px-3 rounded transition-colors",d.value===n.tournament.id?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-700"])},o(n.tournament.name),11,P))),128))]),t("div",V,[(r(!0),a(y,null,v(h.value,n=>(r(),a("div",{key:n.tournament.id,class:"bg-white shadow-md rounded-lg border border-gray-200 overflow-hidden"},[t("div",I,[t("div",M,[t("div",null,[t("h2",W,o(n.tournament.name),1),n.tournament.description?(r(),a("p",$,o(n.tournament.description),1)):u("",!0),t("p",H,o(w(n.tournament.date)),1)]),t("div",U,[t("span",{class:m(["py-1 px-3 rounded",n.tournament.isActive?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-200 text-gray-700"])},o(n.tournament.isActive?"Active":"Completed"),3),t("p",q,o(n.standings.length)+" "+o(n.standings.length===1?"player":"players"),1)])])]),t("div",J,[n.standings.length===0?(r(),a("div",K,e[3]||(e[3]=[t("div",{class:"text-gray-400 text-4xl mb-2"},"🎯",-1),t("p",{class:"text-gray-600"},"No results recorded for this tournament yet.",-1)]))):(r(),a("div",O,[(r(!0),a(y,null,v(n.standings,s=>(r(),a("div",{key:s.user.id,class:m(["bg-white shadow-md rounded-lg p-4 border border-gray-200 flex justify-between items-center",s.rank<=3?"bg-yellow-50 border-yellow-200":""])},[t("div",Q,[t("div",X,[t("span",{class:m(["text-xl font-bold mr-2",s.rank===1?"text-yellow-600":s.rank===2?"text-gray-500":s.rank===3?"text-yellow-700":"text-gray-900"])}," #"+o(s.rank),3),s.rank===1?(r(),a("span",Y,"🏆")):s.rank===2?(r(),a("span",Z,"🥈")):s.rank===3?(r(),a("span",tt,"🥉")):u("",!0)]),t("div",et,[s.user.picture?(r(),a("img",{key:0,src:s.user.picture,alt:s.user.firstName,class:"h-10 w-10 rounded-full mr-3"},null,8,st)):u("",!0),t("div",null,[t("div",nt,o(s.user.firstName)+" "+o(s.user.lastName),1),s.user.username?(r(),a("div",ot," @"+o(s.user.username),1)):u("",!0)])])]),t("div",at,[t("div",rt,[t("div",lt,[t("span",it,o(s.wins)+"W ",1),e[4]||(e[4]=t("span",{class:"text-gray-400"},"-",-1)),t("span",dt,o(s.losses)+"L ",1)]),t("div",ct,o(s.totalGames)+" "+o(s.totalGames===1?"game":"games"),1)]),t("div",ut,[t("div",mt,[t("div",xt,[t("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:R({width:s.winRate*100+"%"})},null,4)]),t("span",gt,o((s.winRate*100).toFixed(1))+"% ",1)]),e[5]||(e[5]=t("div",{class:"text-xs text-gray-500"},"Win Rate",-1))])])],2))),128))]))])]))),128))]),d.value===null&&c(i).length>1?(r(),a("div",yt,[e[10]||(e[10]=t("h2",{class:"text-2xl font-bold mb-4"},"Tournament Statistics",-1)),t("div",vt,[t("div",bt,[t("div",_t,o(c(i).length),1),e[6]||(e[6]=t("div",{class:"text-gray-600"},"Total Tournaments",-1))]),t("div",ht,[t("div",pt,o(p.value),1),e[7]||(e[7]=t("div",{class:"text-gray-600"},"Active Tournaments",-1))]),t("div",ft,[t("div",kt,o(f.value),1),e[8]||(e[8]=t("div",{class:"text-gray-600"},"Total Players",-1))]),t("div",wt,[t("div",Tt,o(k.value),1),e[9]||(e[9]=t("div",{class:"text-gray-600"},"Total Games",-1))])])])):u("",!0)]))]))}});export{Rt as default};
