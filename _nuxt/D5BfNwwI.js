import{_ as R}from"./CNjZpCbW.js";import{e as z,s as A,r as C,f as F,g as O,c as n,o as r,b as g,a as e,h as x,n as f,u as l,t as a,F as U,i as N,w as D,d as w,j as V,k as u,v as c,l as E,_ as P}from"./BLjF41zC.js";import{u as G}from"./BeV5hg_6.js";import{u as H}from"./ChjthFXB.js";import{_ as J}from"./BrHr5CZF.js";const K={class:"mt-8"},Q={class:"border-b border-gray-200"},W={class:"-mb-px flex space-x-8"},X={key:0,class:"mt-6"},Y={key:0,class:"text-center py-10"},Z={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},ee={key:2,class:"bg-white p-6 rounded shadow-md"},te={key:0,class:"text-center py-6"},se={key:1},oe={class:"min-w-full bg-white"},ne={class:"py-2 px-4 border-b"},re={class:"py-2 px-4 border-b"},de={class:"py-2 px-4 border-b"},le={class:"py-2 px-4 border-b"},ae={class:"py-2 px-4 border-b text-center"},ie={key:1,class:"mt-6"},ue={key:0,class:"text-center py-10"},be={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4"},me={class:"bg-white p-6 rounded shadow-md mb-6"},ce={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},pe={class:"flex items-center"},xe={class:"flex justify-end"},ve=["disabled"],ye={class:"bg-white p-6 rounded shadow-md"},ge={key:0,class:"text-center py-6"},fe={key:1,class:"space-y-4"},we={class:"flex justify-between items-start"},he={class:"flex-1"},_e={class:"flex items-center gap-2 mb-2"},ke={class:"text-lg font-semibold"},Te={key:0,class:"text-gray-600 mb-2"},Ae={class:"text-sm text-gray-500"},Ce={class:"flex gap-2 ml-4"},Ue=["onClick"],Ne=["onClick"],De={key:2,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Ve={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},Ee={class:"flex items-center"},Se={class:"flex justify-end space-x-2"},Me=["disabled"],$e=z({__name:"index",setup(Le){const h=G(),b=H(),{users:v,loading:S,error:_}=A(h),{tournaments:y,loading:p,error:k}=A(b),m=C("users"),o=C(null),d=F({name:"",description:"",date:"",isActive:!0}),M=i=>new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),$=async()=>{await b.createTournament({name:d.name,description:d.description||void 0,date:d.date,isActive:d.isActive})&&(d.name="",d.description="",d.date="",d.isActive=!0)},L=i=>{o.value={...i,date:new Date(i.date).toISOString().split("T")[0]}},j=async()=>{if(!o.value)return;await b.updateTournament(o.value.id,{name:o.value.name,description:o.value.description,date:o.value.date,isActive:o.value.isActive})&&(o.value=null)},q=()=>{o.value=null},B=async(i,t)=>{confirm(`Are you sure you want to delete the tournament "${t}"? This action cannot be undone.`)&&await b.deleteTournament(i)};return O(async()=>{await Promise.all([h.fetchAllUsers(),b.fetchTournaments()]),console.log("Users loaded:",v.value),console.log("Tournaments loaded:",y.value)}),(i,t)=>{const T=R;return r(),n("div",null,[g(J,{title:"Admin Dashboard",subtitle:"Manage users, cards, and tournaments"}),e("div",K,[e("div",Q,[e("nav",W,[e("button",{onClick:t[0]||(t[0]=s=>m.value="users"),class:f(["py-2 px-1 border-b-2 font-medium text-sm",m.value==="users"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," User Management ",2),e("button",{onClick:t[1]||(t[1]=s=>m.value="tournaments"),class:f(["py-2 px-1 border-b-2 font-medium text-sm",m.value==="tournaments"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Tournament Management ",2)])])]),m.value==="users"?(r(),n("div",X,[l(S)?(r(),n("div",Y,t[11]||(t[11]=[e("p",null,"Loading users...",-1)]))):l(_)?(r(),n("div",Z,a(l(_)),1)):(r(),n("div",ee,[t[15]||(t[15]=e("h2",{class:"text-2xl font-bold mb-4"},"User Management",-1)),l(v).length===0?(r(),n("div",te,t[12]||(t[12]=[e("p",null,"No users found.",-1)]))):(r(),n("div",se,[e("table",oe,[t[14]||(t[14]=e("thead",null,[e("tr",null,[e("th",{class:"py-2 px-4 border-b text-left"},"Name"),e("th",{class:"py-2 px-4 border-b text-left"},"Email"),e("th",{class:"py-2 px-4 border-b text-left"},"Username"),e("th",{class:"py-2 px-4 border-b text-left"},"Role"),e("th",{class:"py-2 px-4 border-b text-center"},"Actions")])],-1)),e("tbody",null,[(r(!0),n(U,null,N(l(v),s=>(r(),n("tr",{key:s.id},[e("td",ne,a(s.firstName)+" "+a(s.lastName),1),e("td",re,a(s.email),1),e("td",de,a(s.username||"Not set"),1),e("td",le,a(s.role),1),e("td",ae,[g(T,{to:`/admin/users/${s.id}`,class:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-1 px-3 rounded text-sm"},{default:D(()=>t[13]||(t[13]=[w(" Manage Cards ")])),_:2},1032,["to"])])]))),128))])])]))]))])):x("",!0),m.value==="tournaments"?(r(),n("div",ie,[l(p)?(r(),n("div",ue,t[16]||(t[16]=[e("p",null,"Loading tournaments...",-1)]))):l(k)?(r(),n("div",be,[w(a(l(k))+" ",1),e("button",{onClick:t[2]||(t[2]=s=>l(b).clearError()),class:"ml-2 text-red-500 hover:text-red-700"},"Ã—")])):x("",!0),e("div",me,[t[21]||(t[21]=e("h2",{class:"text-2xl font-bold mb-4"},"Create New Tournament",-1)),e("form",{onSubmit:V($,["prevent"]),class:"space-y-4"},[e("div",ce,[e("div",null,[t[17]||(t[17]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Tournament Name",-1)),u(e("input",{id:"name","onUpdate:modelValue":t[3]||(t[3]=s=>d.name=s),type:"text",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Enter tournament name"},null,512),[[c,d.name]])]),e("div",null,[t[18]||(t[18]=e("label",{for:"date",class:"block text-sm font-medium text-gray-700"},"Date",-1)),u(e("input",{id:"date","onUpdate:modelValue":t[4]||(t[4]=s=>d.date=s),type:"date",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[c,d.date]])])]),e("div",null,[t[19]||(t[19]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),u(e("textarea",{id:"description","onUpdate:modelValue":t[5]||(t[5]=s=>d.description=s),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Enter tournament description (optional)"},null,512),[[c,d.description]])]),e("div",pe,[u(e("input",{id:"isActive","onUpdate:modelValue":t[6]||(t[6]=s=>d.isActive=s),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[E,d.isActive]]),t[20]||(t[20]=e("label",{for:"isActive",class:"ml-2 block text-sm text-gray-900"}," Active Tournament ",-1))]),e("div",xe,[e("button",{type:"submit",disabled:l(p),class:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded disabled:opacity-50"},a(l(p)?"Creating...":"Create Tournament"),9,ve)])],32)]),e("div",ye,[t[24]||(t[24]=e("h2",{class:"text-2xl font-bold mb-4"},"Existing Tournaments",-1)),l(y).length===0?(r(),n("div",ge,t[22]||(t[22]=[e("p",null,"No tournaments found. Create your first tournament above!",-1)]))):(r(),n("div",fe,[(r(!0),n(U,null,N(l(y),s=>(r(),n("div",{key:s.id,class:"border rounded-lg p-4 hover:shadow-md transition-shadow"},[e("div",we,[e("div",he,[e("div",_e,[e("h3",ke,a(s.name),1),e("span",{class:f(["px-2 py-1 rounded-full text-xs font-medium",s.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},a(s.isActive?"Active":"Inactive"),3)]),s.description?(r(),n("p",Te,a(s.description),1)):x("",!0),e("p",Ae," Date: "+a(M(s.date)),1)]),e("div",Ce,[g(T,{to:`/admin/tournaments/${s.id}`,class:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-3 rounded text-sm"},{default:D(()=>t[23]||(t[23]=[w(" Manage Results ")])),_:2},1032,["to"]),e("button",{onClick:I=>L(s),class:"bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-2 px-3 rounded text-sm"}," Edit ",8,Ue),e("button",{onClick:I=>B(s.id,s.name),class:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-3 rounded text-sm"}," Delete ",8,Ne)])])]))),128))]))])])):x("",!0),o.value?(r(),n("div",De,[e("div",Ve,[t[29]||(t[29]=e("h3",{class:"text-lg font-bold text-gray-900 mb-4"},"Edit Tournament",-1)),e("form",{onSubmit:V(j,["prevent"]),class:"space-y-4"},[e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tournament Name",-1)),u(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>o.value.name=s),type:"text",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[c,o.value.name]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date",-1)),u(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>o.value.date=s),type:"date",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[c,o.value.date]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700"},"Description",-1)),u(e("textarea",{"onUpdate:modelValue":t[9]||(t[9]=s=>o.value.description=s),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[c,o.value.description]])]),e("div",Ee,[u(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>o.value.isActive=s),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[E,o.value.isActive]]),t[28]||(t[28]=e("label",{class:"ml-2 block text-sm text-gray-900"}," Active Tournament ",-1))]),e("div",Se,[e("button",{type:"button",onClick:q,class:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded"}," Cancel "),e("button",{type:"submit",disabled:l(p),class:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded disabled:opacity-50"},a(l(p)?"Updating...":"Update Tournament"),9,Me)])],32)])])):x("",!0)])}}}),ze=P($e,[["__scopeId","data-v-619b2efc"]]);export{ze as default};
