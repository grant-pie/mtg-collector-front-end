import{_ as m}from"./D8ke3kNg.js";import{g as p,m as u,j as f,q as h,z as v,c as n,n as x,a as r,b as _,t as b,w as k,o as a,d as g}from"./CpfRM8F9.js";import{u as y}from"./Cl4f5Tkc.js";const N={class:"flex justify-center items-center min-h-screen"},w={key:0,class:"text-center"},A={key:1,class:"text-center"},B=p({__name:"callback",setup(R){const c=h(),i=v(),l=y(),o=u(!0),t=u(null);return f(async()=>{const s=c.query.data;if(!s||typeof s!="string"){t.value="No authentication data provided",o.value=!1;return}try{const e=JSON.parse(decodeURIComponent(s));console.log("Auth result:",e),e.token?(l.setToken(e.token),e.user&&l.setUser(e.user),i.push("/profile")):(t.value="No token received from server",o.value=!1)}catch(e){console.error("Auth callback error:",e),t.value="An error occurred during authentication",o.value=!1}}),(s,e)=>{const d=m;return a(),n("div",N,[o.value?(a(),n("div",w,e[0]||(e[0]=[r("h2",{class:"text-2xl font-bold mb-4"},"Processing login...",-1),r("p",null,"Please wait while we complete your authentication.",-1)]))):t.value?(a(),n("div",A,[e[2]||(e[2]=r("h2",{class:"text-2xl font-bold mb-4 text-red-600"},"Authentication Error",-1)),r("p",null,b(t.value),1),_(d,{to:"/",class:"inline-block mt-4 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},{default:k(()=>e[1]||(e[1]=[g(" Return to Home ")])),_:1})])):x("",!0)])}}});export{B as default};
